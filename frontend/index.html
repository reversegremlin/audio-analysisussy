<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaleidoscope Studio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 40 40" fill="none">
                    <circle cx="20" cy="20" r="18" stroke="currentColor" stroke-width="2"/>
                    <circle cx="20" cy="20" r="12" stroke="currentColor" stroke-width="1.5"/>
                    <circle cx="20" cy="20" r="6" fill="currentColor"/>
                    <line x1="20" y1="2" x2="20" y2="10" stroke="currentColor" stroke-width="1.5"/>
                    <line x1="20" y1="30" x2="20" y2="38" stroke="currentColor" stroke-width="1.5"/>
                    <line x1="2" y1="20" x2="10" y2="20" stroke="currentColor" stroke-width="1.5"/>
                    <line x1="30" y1="20" x2="38" y2="20" stroke="currentColor" stroke-width="1.5"/>
                </svg>
                <span class="logo-text">Kaleidoscope<span class="logo-accent">Studio</span></span>
            </div>
            <div class="header-controls">
                <div class="status-indicator" id="statusIndicator">
                    <span class="status-dot"></span>
                    <span class="status-text">Ready</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- Left Panel - Controls -->
            <aside class="panel panel-left">
                <div class="panel-section">
                    <h3 class="section-title">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18V5l12-2v13"/>
                            <circle cx="6" cy="18" r="3"/>
                            <circle cx="18" cy="16" r="3"/>
                        </svg>
                        Audio Source
                    </h3>
                    <div class="upload-zone" id="uploadZone">
                        <input type="file" id="audioInput" accept="audio/*" hidden>
                        <div class="upload-content">
                            <svg class="upload-icon" viewBox="0 0 48 48" fill="none">
                                <circle cx="24" cy="24" r="20" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                                <path d="M24 16v16M16 24h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            <p class="upload-text">Drop audio file or click to browse</p>
                            <p class="upload-hint">MP3, WAV, FLAC supported</p>
                        </div>
                    </div>
                    <div class="track-info" id="trackInfo" style="display: none;">
                        <div class="track-name" id="trackName">Track Name</div>
                        <div class="track-meta">
                            <span id="trackDuration">0:00</span>
                            <span class="separator">•</span>
                            <span id="trackBpm">-- BPM</span>
                        </div>
                    </div>
                </div>

                <!-- Geometry Section -->
                <div class="panel-section">
                    <h3 class="section-title">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"/>
                        </svg>
                        Geometry
                    </h3>
                    <div class="knob-row">
                        <div class="knob-control">
                            <div class="knob" data-param="mirrors" data-min="3" data-max="16" data-value="8">
                                <div class="knob-track"></div>
                                <div class="knob-indicator"></div>
                                <div class="knob-glow"></div>
                            </div>
                            <span class="knob-label">Mirrors</span>
                            <span class="knob-value" id="mirrorsValue">8</span>
                        </div>
                        <div class="knob-control">
                            <div class="knob" data-param="baseRadius" data-min="50" data-max="300" data-value="150">
                                <div class="knob-track"></div>
                                <div class="knob-indicator"></div>
                                <div class="knob-glow"></div>
                            </div>
                            <span class="knob-label">Size</span>
                            <span class="knob-value" id="baseRadiusValue">150</span>
                        </div>
                    </div>
                    <div class="knob-row">
                        <div class="knob-control">
                            <div class="knob" data-param="orbitRadius" data-min="50" data-max="400" data-value="200">
                                <div class="knob-track"></div>
                                <div class="knob-indicator"></div>
                                <div class="knob-glow"></div>
                            </div>
                            <span class="knob-label">Orbit</span>
                            <span class="knob-value" id="orbitRadiusValue">200</span>
                        </div>
                        <div class="knob-control">
                            <div class="knob" data-param="rotationSpeed" data-min="0.5" data-max="5" data-value="2" data-step="0.1">
                                <div class="knob-track"></div>
                                <div class="knob-indicator"></div>
                                <div class="knob-glow"></div>
                            </div>
                            <span class="knob-label">Spin</span>
                            <span class="knob-value" id="rotationSpeedValue">2.0</span>
                        </div>
                    </div>
                </div>

                <!-- Dynamics Section -->
                <div class="panel-section">
                    <h3 class="section-title">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                        </svg>
                        Dynamics
                    </h3>
                    <div class="knob-row">
                        <div class="knob-control">
                            <div class="knob" data-param="maxScale" data-min="1.0" data-max="3.0" data-value="1.8" data-step="0.1">
                                <div class="knob-track"></div>
                                <div class="knob-indicator"></div>
                                <div class="knob-glow"></div>
                            </div>
                            <span class="knob-label">Punch</span>
                            <span class="knob-value" id="maxScaleValue">1.8</span>
                        </div>
                        <div class="knob-control">
                            <div class="knob" data-param="trailAlpha" data-min="0" data-max="100" data-value="40">
                                <div class="knob-track"></div>
                                <div class="knob-indicator"></div>
                                <div class="knob-glow"></div>
                            </div>
                            <span class="knob-label">Trail</span>
                            <span class="knob-value" id="trailAlphaValue">40</span>
                        </div>
                    </div>
                    <div class="slider-control">
                        <label class="slider-label">
                            <span>Attack</span>
                            <span class="slider-value" id="attackValue">0 ms</span>
                        </label>
                        <input type="range" class="slider" id="attackSlider" min="0" max="200" value="0">
                    </div>
                    <div class="slider-control">
                        <label class="slider-label">
                            <span>Release</span>
                            <span class="slider-value" id="releaseValue">200 ms</span>
                        </label>
                        <input type="range" class="slider" id="releaseSlider" min="50" max="1000" value="200">
                    </div>
                </div>
            </aside>

            <!-- Center - Preview -->
            <section class="preview-section">
                <div class="canvas-container">
                    <canvas id="visualizerCanvas" width="1920" height="1080"></canvas>
                    <div class="canvas-overlay" id="canvasOverlay">
                        <div class="overlay-content">
                            <svg class="overlay-icon" viewBox="0 0 64 64" fill="none">
                                <circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="2"/>
                                <polygon points="26,20 26,44 46,32" fill="currentColor"/>
                            </svg>
                            <p>Load an audio file to begin</p>
                        </div>
                    </div>
                    <div class="canvas-badge">
                        <span id="resolutionBadge">1920 × 1080</span>
                        <span class="separator">•</span>
                        <span id="fpsBadge">60 FPS</span>
                    </div>
                </div>

                <!-- Timeline -->
                <div class="timeline">
                    <div class="waveform-container" id="waveformContainer">
                        <canvas id="waveformCanvas" height="60"></canvas>
                        <div class="playhead" id="playhead"></div>
                    </div>
                    <div class="time-display">
                        <span id="currentTime">0:00</span>
                        <span class="time-separator">/</span>
                        <span id="totalTime">0:00</span>
                    </div>
                </div>

                <!-- Transport -->
                <div class="transport">
                    <button class="transport-btn" id="skipBackBtn" title="Skip back 10s">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                        </svg>
                    </button>
                    <button class="transport-btn play-btn" id="playBtn" title="Play/Pause">
                        <svg class="play-icon" viewBox="0 0 24 24" fill="currentColor">
                            <polygon points="5,3 19,12 5,21"/>
                        </svg>
                        <svg class="pause-icon" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                            <rect x="6" y="4" width="4" height="16"/>
                            <rect x="14" y="4" width="4" height="16"/>
                        </svg>
                    </button>
                    <button class="transport-btn" id="skipForwardBtn" title="Skip forward 10s">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
                        </svg>
                    </button>
                    <div class="volume-control">
                        <svg viewBox="0 0 24 24" fill="currentColor" class="volume-icon">
                            <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/>
                        </svg>
                        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="80">
                    </div>
                </div>
            </section>

            <!-- Right Panel -->
            <aside class="panel panel-right">
                <!-- Shape Section -->
                <div class="panel-section">
                    <h3 class="section-title">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                        </svg>
                        Shape
                    </h3>
                    <div class="knob-row">
                        <div class="knob-control">
                            <div class="knob" data-param="minSides" data-min="3" data-max="8" data-value="3">
                                <div class="knob-track"></div>
                                <div class="knob-indicator"></div>
                                <div class="knob-glow"></div>
                            </div>
                            <span class="knob-label">Min Sides</span>
                            <span class="knob-value" id="minSidesValue">3</span>
                        </div>
                        <div class="knob-control">
                            <div class="knob" data-param="maxSides" data-min="6" data-max="24" data-value="12">
                                <div class="knob-track"></div>
                                <div class="knob-indicator"></div>
                                <div class="knob-glow"></div>
                            </div>
                            <span class="knob-label">Max Sides</span>
                            <span class="knob-value" id="maxSidesValue">12</span>
                        </div>
                    </div>
                    <div class="knob-row">
                        <div class="knob-control">
                            <div class="knob" data-param="baseThickness" data-min="1" data-max="8" data-value="3">
                                <div class="knob-track"></div>
                                <div class="knob-indicator"></div>
                                <div class="knob-glow"></div>
                            </div>
                            <span class="knob-label">Stroke</span>
                            <span class="knob-value" id="baseThicknessValue">3</span>
                        </div>
                        <div class="knob-control">
                            <div class="knob" data-param="maxThickness" data-min="4" data-max="20" data-value="12">
                                <div class="knob-track"></div>
                                <div class="knob-indicator"></div>
                                <div class="knob-glow"></div>
                            </div>
                            <span class="knob-label">Max Stroke</span>
                            <span class="knob-value" id="maxThicknessValue">12</span>
                        </div>
                    </div>
                </div>

                <!-- Colors Section -->
                <div class="panel-section">
                    <h3 class="section-title">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 2a10 10 0 0 1 0 20"/>
                        </svg>
                        Colors
                    </h3>
                    <div class="color-row">
                        <label class="color-control">
                            <span>Background</span>
                            <input type="color" id="bgColor" value="#05050f">
                        </label>
                        <label class="color-control">
                            <span>Accent</span>
                            <input type="color" id="accentColor" value="#f59e0b">
                        </label>
                    </div>
                    <div class="toggle-row">
                        <label class="toggle-control">
                            <span>Chroma Colors</span>
                            <input type="checkbox" id="chromaColors" checked>
                            <span class="toggle-switch"></span>
                        </label>
                    </div>
                    <div class="slider-control">
                        <label class="slider-label">
                            <span>Saturation</span>
                            <span class="slider-value" id="saturationValue">85%</span>
                        </label>
                        <input type="range" class="slider" id="saturationSlider" min="0" max="100" value="85">
                    </div>
                </div>

                <!-- Export Section -->
                <div class="panel-section">
                    <h3 class="section-title">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        Export
                    </h3>
                    <div class="export-options">
                        <div class="option-group">
                            <label class="option-label">Resolution</label>
                            <div class="button-group">
                                <button class="option-btn" data-resolution="1280x720">720p</button>
                                <button class="option-btn active" data-resolution="1920x1080">1080p</button>
                                <button class="option-btn" data-resolution="3840x2160">4K</button>
                            </div>
                        </div>
                        <div class="option-group">
                            <label class="option-label">Frame Rate</label>
                            <div class="button-group">
                                <button class="option-btn" data-fps="30">30</button>
                                <button class="option-btn active" data-fps="60">60</button>
                            </div>
                        </div>
                    </div>
                    <button class="export-btn" id="exportBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        Export Video
                    </button>
                    <div class="export-progress" id="exportProgress" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <span class="progress-text" id="progressText">Rendering... 0%</span>
                    </div>
                </div>
            </aside>
        </main>
    </div>

    <audio id="audioElement" crossorigin="anonymous"></audio>
    <script src="app.js"></script>
</body>
</html>
